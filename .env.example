# ==================================================================
# CONFLUENCE CLOUD MCP SERVER - ENVIRONMENT CONFIGURATION
# ==================================================================
# 
# This file contains all environment variables needed for the 
# Confluence Cloud MCP server, including cross-server integration
# with Jira MCP servers. Copy this file to .env and configure
# the values for your environment.
#

# ==================================================================
# BASIC CONFLUENCE CONFIGURATION
# ==================================================================

# Confluence Cloud Authentication
# Required: Email and API Token for Basic Auth (default method)
CONFLUENCE_EMAIL=your-email@example.com
CONFLUENCE_API_TOKEN=your-confluence-api-token

# Confluence Cloud Domain
# Required: Your Confluence Cloud instance domain
CONFLUENCE_DOMAIN=your-company.atlassian.net

# OAuth2 Authentication (Alternative to Basic Auth)
# Optional: Use OAuth2 instead of Basic Auth
# CONFLUENCE_OAUTH_ACCESS_TOKEN=your-oauth-access-token
# CONFLUENCE_OAUTH_REFRESH_TOKEN=your-oauth-refresh-token
# CONFLUENCE_OAUTH_CLIENT_ID=your-oauth-client-id
# CONFLUENCE_OAUTH_CLIENT_SECRET=your-oauth-client-secret

# ==================================================================
# CROSS-SERVER INTEGRATION CONFIGURATION
# ==================================================================

# Enable Cross-Server Integration
# Set to 'true' to enable integration with Jira MCP servers
# Default: false
CROSS_SERVER_ENABLED=false

# Jira MCP Server Path
# Path to the Jira MCP server executable/script
# Required when CROSS_SERVER_ENABLED=true
# Example: /Users/yourusername/Servers/mcp-jira/build/index.js
JIRA_MCP_PATH=/path/to/your/jira-mcp-server

# ==================================================================
# SERVER DISCOVERY AND CONNECTION SETTINGS
# ==================================================================

# Server Polling Interval
# How often to check for Jira server availability (milliseconds)
# Default: 10000 (10 seconds)
SERVER_POLL_INTERVAL=10000

# Jira MCP Connection Timeout
# Connection timeout for Jira MCP server (milliseconds)
# Default: 30000 (30 seconds)
JIRA_MCP_TIMEOUT=30000

# Jira MCP Max Retries
# Maximum retry attempts for failed Jira server connections
# Default: 3
JIRA_MCP_MAX_RETRIES=3

# ==================================================================
# SAFETY BOUNDARIES AND OPERATION CONTROLS
# ==================================================================

# Allowed Incoming Modes
# Operations that can be received from other servers
# Options: read, create, update, delete
# Default: read,create
ALLOWED_INCOMING_MODES=read,create

# Allowed Outgoing Modes  
# Operations that can be sent to other servers
# Options: read, create, update, delete
# Default: read,create,update
ALLOWED_OUTGOING_MODES=read,create,update

# Excluded Incoming Operations
# Specific operations that cannot be received from other servers
# Comma-separated list of operation names
# Default: delete_confluence_page,delete_confluence_space,update_confluence_page
EXCLUDED_INCOMING_OPERATIONS=delete_confluence_page,delete_confluence_space,update_confluence_page

# Excluded Outgoing Operations
# Specific operations that cannot be sent to other servers
# Comma-separated list of operation names
# Default: delete_issue,delete_project
EXCLUDED_OUTGOING_OPERATIONS=delete_issue,delete_project

# Operations Requiring Confirmation
# Operations that require explicit confirmation before execution
# Comma-separated list of operation names
# Default: delete_confluence_page,update_confluence_page
REQUIRE_CONFIRMATION_OPERATIONS=delete_confluence_page,update_confluence_page

# ==================================================================
# RATE LIMITING AND BATCH CONTROLS
# ==================================================================

# Rate Limits
# Maximum operations per minute and hour to prevent abuse
# Default: 30 per minute, 1000 per hour
RATE_LIMIT_PER_MINUTE=30
RATE_LIMIT_PER_HOUR=1000

# Maximum Cross-Server Batch Size
# Maximum number of operations that can be batched together
# Default: 10
MAX_CROSS_SERVER_BATCH=10

# ==================================================================
# ALLOWED OUTGOING OPERATIONS (OPTIONAL)
# ==================================================================
# 
# Specific Jira operations that are allowed to be called
# Leave empty to allow all operations (filtered by modes)
# Comma-separated list of Jira MCP tool names
# Example: get_issue,list_issues,add_comment,create_issue
ALLOWED_OUTGOING_OPERATIONS=

# ==================================================================
# HEALTH CHECK AND MONITORING
# ==================================================================

# Additional excluded operations for health monitoring
# Operations to exclude from general health checks
# Default: delete_confluence_page,delete_confluence_space
EXCLUDED_OPERATIONS=delete_confluence_page,delete_confluence_space

# ==================================================================
# DEVELOPMENT AND DEBUGGING
# ==================================================================

# Debug Mode
# Enable additional logging for development
# Default: false
DEBUG=false

# Log Level
# Logging level for the server
# Options: error, warn, info, debug
# Default: info
LOG_LEVEL=info

# ==================================================================
# EXAMPLE CONFIGURATION FOR CROSS-SERVER INTEGRATION
# ==================================================================
#
# To enable cross-server integration with a Jira MCP server:
#
# 1. Set CROSS_SERVER_ENABLED=true
# 2. Set JIRA_MCP_PATH to point to your Jira MCP server
# 3. Configure safety boundaries as needed
# 4. Adjust rate limits based on your usage patterns
# 5. Test connectivity using the health check tools
#
# Example enabled configuration:
# CROSS_SERVER_ENABLED=true
# JIRA_MCP_PATH=/Users/yourusername/Servers/mcp-jira/build/index.js
# ALLOWED_OUTGOING_MODES=read,create,update
# EXCLUDED_OUTGOING_OPERATIONS=delete_issue,delete_project
# RATE_LIMIT_PER_MINUTE=50
# RATE_LIMIT_PER_HOUR=2000
#
# ==================================================================